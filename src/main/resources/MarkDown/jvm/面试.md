### 什么是双亲委派机制

> java虚拟机对class文件采用的是按需加载的方式，也就是说当需要使用该类时才会将它的class文件加载到内存生成class对象。而且加载某个类的calss文件时，java虚拟机采用的是双亲委派模式，即把请求交由给父类处理，他是一种任务委派模式 

#### 工作原理

1. 如果一个类加载器收到了类加载请求，它并不会自己先去加载，而是把这个请求委托给最上层的父类加载器去执行 最终到达启动类加载器进行执行
2. 如果父类加载器可以完成类加载的任务。就成功返回，倘若夫类加载器无法完成此加载任务，子加载器才会尝试自己去加载。这就是双亲委派模式

#### 双亲委派机制优势

- 避免类的重复加载
- 保护程序安全，避免java核心API被篡改，比如自定义 java.lang.String 此时会加载核心类String 执行main方法的时候报错没有main方法。或者自定义一个java.lang.myTest 会报错 Prohibited package name: java 不可以使用这个包名
- 实现一些SPI接口的时候由 引导类加载器加载 核心jar包。具体实现类为第三方jar包由系统类加载加载

#### 沙箱安全机制

> 对于自定义的java.lang.String 类，加载的时候会使用引导类加载器进行加载， 运行main方法的时候会报错没有main方法。因为加载的是rt.jat包中的String类。这样可以保证对java核心源代码的保护。这个就叫沙箱安全机制



### 使用PC寄存器存储字节码指令地址有什么用呢。为什么使用PC寄存器记录当前线程的执行地址呢

- CPU需要不停的在多个线程之间切换，切换完成后需要知道接着应该从哪里开始继续执行。
- JVM的字节码解释器就需要通过改变PC寄存器的值来明确下一条应该执行什么样的字节码指令 

### PC寄存器为什么会被设定为线程私有



![image-20230218164704120](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230218164704120.png)



 