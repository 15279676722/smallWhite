package com.example.smallwhite.utils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jdbc.core.BeanPropertyRowMapper;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.stereotype.Service;import java.lang.reflect.InvocationTargetException;import java.util.List;/** * @author: yangqiang * @create: 2020-04-27 11:50 * */@Servicepublic class JdbcTemplateService  {    @Autowired    JdbcTemplate jdbcTemplate;    /**     * @param clazz 要返回的实体类     * @return list 实体类集合     * */    public <T> List<T> query(Class<T> clazz){            return jdbcTemplate.query(getSelectSql(clazz), new BeanPropertyRowMapper<>(clazz));    }    /**     * @param clazz     * @return tablename     */    private <T> String getSelectSql(Class<T> clazz) {        String sql = null;        String tableName = null;        try {            T t = clazz.newInstance();            tableName = (String) t.getClass().getMethod("getTableName").invoke(t);            sql = "SELECT * FROM " + tableName;        } catch (IllegalAccessException e) {            e.printStackTrace();        } catch (InvocationTargetException e) {            e.printStackTrace();        } catch (NoSuchMethodException e) {            e.printStackTrace();        } catch (InstantiationException e) {            e.printStackTrace();        }        return sql;    }}