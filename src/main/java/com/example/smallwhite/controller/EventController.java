package com.example.smallwhite.controller;import com.example.smallwhite.entity.Event;import com.example.smallwhite.utils.InsertUtils;import com.example.smallwhite.utils.JdbcUtil;import com.example.smallwhite.utils.ResultData;import io.swagger.annotations.ApiOperation;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.ArrayList;import java.util.List;import java.util.Optional;/** * @author: yangqiang * @create: 2020-06-22 09:42 */@RestController@RequestMapping("/event")public class EventController {    @Autowired    JdbcUtil jdbcUtil;    @ApiOperation(value = "查找备忘录" ,notes = "查找备忘录")    @PostMapping("/list")    public Object list(){        return ResultData.ok().data("list",jdbcUtil.query(Event.class));    }    @PostMapping("/delete")    public Object delete(Event event){        Integer integer = jdbcUtil.delete(event.getId(), Event.class);        return ResultData.ok().data("list",jdbcUtil.query(Event.class) );    }    @PostMapping("/update")    public Object update(Event event){        List<Event> updateList = new ArrayList<Event>();        List<Event> list = jdbcUtil.query(Event.class);        Optional<Event> first = list.stream().filter(vo -> vo.getId().equals(event.getId())).findFirst();        Event updateEvent  = new Event();        if(first.isPresent()){            updateEvent = first.get();        }else{            updateEvent = event;        }        updateEvent.setState(1);        updateList.add(updateEvent);        jdbcUtil.batchUpdate(list);        return ResultData.ok().data("list",jdbcUtil.query(Event.class));    }    @PostMapping("/insert")    public Object insert(Event event){        List<Event> list = new ArrayList<Event>();        list.add(event);        jdbcUtil.insert(InsertUtils.InsertEntity(list));        return ResultData.ok().data("list",jdbcUtil.query(Event.class));    }}